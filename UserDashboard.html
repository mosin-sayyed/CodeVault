<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dashboard - CodeVault</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="userDashboard.css">
    
    <!-- ADD THESE 2 LINES -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="Tester.html" class="logo">
                    <i class="fas fa-code"></i>
                    CodeVault
                </a>

                <div class="nav-links">
                    <a href="#dashboard" class="nav-link active">Dashboard</a>
                    <a href="#snippets" class="nav-link">My Snippets</a>
                    <a href="#favorites" class="nav-link">Favorites</a>
                    <a href="#tags" class="nav-link">Tags</a>
                </div>

                <div class="nav-actions">
                    <div class="theme-toggle-container">
                        <span class="theme-label">Theme</span>
                        <div class="theme-toggle" id="themeToggle">
                            <i class="fas fa-sun sun"></i>
                            <i class="fas fa-moon moon"></i>
                        </div>
                    </div>
                    <div class="user-menu" id="userMenu">
                        <div class="user-avatar" id="userAvatar">JD</div>
                        <div class="user-info">
                            <div class="user-name" id="userName">John Developer</div>
                            <div class="user-role">Pro Member</div>
                        </div>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>

                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Dashboard -->
    <section class="dashboard">
        <div class="container">
            <div class="dashboard-content">

                <!-- Sidebar -->
                <aside class="sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#dashboard" class="side-link active"><i class="fas fa-home"></i> Dashboard</a></li>
                        <li><a href="#snippets" class="side-link"><i class="fas fa-code"></i> My Snippets</a></li>
                        <li><a href="#favorites" class="side-link"><i class="fas fa-star"></i> Favorites</a></li>
                        <li><a href="#tags" class="side-link"><i class="fas fa-tags"></i> Tags</a></li>
                        <li><a href="#settings"><i class="fas fa-cog"></i> Settings</a></li>
                        <li><a href="#help"><i class="fas fa-question-circle"></i> Help & Support</a></li>
                        <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                    </ul>
                </aside>

                <!-- Main Content -->
                <main class="main-content">
                    <!-- Welcome Banner -->
                    <section class="welcome-banner" id="dashboardSection">
                        <div class="welcome-content">
                            <div class="welcome-text">
                                <h1>Welcome back, <span id="welcomeName">John</span>! ðŸ‘‹</h1>
                                <p>Ready to organize your code snippets and boost your productivity?</p>
                                <div class="welcome-stats">
                                    <div class="stat">
                                        <div class="stat-value" id="snippetCount">0</div>
                                        <div class="stat-label">Snippets</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="favoriteCount">0</div>
                                        <div class="stat-label">Favorites</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="languageCount">0</div>
                                        <div class="stat-label">Languages</div>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-success" id="addSnippetBtn">
                                <i class="fas fa-plus"></i> Add New Snippet
                            </button>
                        </div>
                    </section>

                    <!-- Recent Snippets -->
                    <section class="snippets-section" id="recentSection">
                        <div class="section-header">
                            <h2 class="section-title">Recent Snippets</h2>
                            <a href="#snippets" class="btn btn-secondary">View All</a>
                        </div>
                        <div class="snippets-grid" id="snippetsGrid">
                            <!-- Snippet cards will be populated by JavaScript -->
                        </div>
                    </section>
                    
                    <!-- My Snippets Section -->
                    <section id="mySnippetsSection" style="display:none;">
                        <div class="section-header">
                            <div style="display:flex;flex-direction:column;gap:0.5rem;width:100%;">
                                <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;">
                                    <h2 class="section-title" style="margin:0;">My Snippets</h2>

                                    <!-- Filter Bar -->
                                    <div id="mySnippetsFilterBar" style="display:flex;gap:0.75rem;align-items:center;margin-left:auto;">
                                        <div class="search-bar" style="min-width:360px;">
                                            <i class="fas fa-search"></i>
                                            <input id="globalSearchInput" type="search" placeholder="Search title, tag or language..." />
                                        </div>

                                        <select id="languageFilter">
                                            <option value="">All languages</option>
                                        </select>

                                        <select id="tagFilter">
                                            <option value="">All tags</option>
                                        </select>

                                        <select id="sortSelect">
                                            <option value="newest">Sort: Newest</option>
                                            <option value="oldest">Sort: Oldest</option>
                                            <option value="lang-az">Lang: A â†’ Z</option>
                                            <option value="lang-za">Lang: Z â†’ A</option>
                                            <option value="fav-first">Favorites first</option>
                                        </select>

                                        <button class="btn btn-secondary" id="clearFiltersBtn">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="mySnippetsGrid" class="snippets-grid"></div>
                    </section>

                    <!-- Favorites Section -->
                    <section id="favoritesSection" class="snippets-section" style="display:none;">
                        <div class="section-header">
                            <h2 class="section-title">Your Favorite Snippets</h2>
                        </div>
                        <div class="snippets-grid" id="favoritesGrid"></div>
                    </section>

                    <!-- Tags Section -->
                    <section id="tagsSection" class="snippets-section" style="display:none;">
                        <div class="section-header">
                            <h2 class="section-title">Your Tags</h2>
                            <div>
                                <button class="btn btn-secondary" id="refreshTagsBtn">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="btn btn-success" id="createTagBtn">
                                    <i class="fas fa-plus"></i> Create Tag
                                </button>
                            </div>
                        </div>

                        <!-- Tags Stats -->
                        <div class="tags-stats" style="display: flex; gap: 2rem; margin-bottom: 2rem; padding: 1rem; background: rgba(15, 23, 42, 0.5); border-radius: 8px;">
                            <div class="stat">
                                <div class="stat-value" id="totalTags">0</div>
                                <div class="stat-label">Total Tags</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="mostUsedTag">-</div>
                                <div class="stat-label">Most Used</div>
                            </div>
                        </div>

                        <!-- Tags Search -->
                        <div class="search-bar" style="margin-bottom: 1.5rem; max-width: 400px;">
                            <i class="fas fa-search"></i>
                            <input type="text" id="tagsSearch" placeholder="Search tags...">
                        </div>

                        <!-- Tags Container -->
                        <div id="tagsContainer" class="tags-grid"></div>
                    </section>

                    <!-- Settings Section -->
                    <section id="settingsSection" class="snippets-section" style="display:none;">
                        <div class="section-header">
                            <h2 class="section-title">Settings</h2>
                            <button class="btn btn-success" id="saveSettingsBtn">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </div>

                        <div class="settings-container">
                            <!-- Profile Settings -->
                            <div class="settings-card">
                                <h3><i class="fas fa-user"></i> Profile Settings</h3>
                                <div class="form-group">
                                    <label>Display Name</label>
                                    <input type="text" id="displayName" placeholder="Enter your display name">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="userEmail" placeholder="Enter your email">
                                </div>
                            </div>

                            <!-- Data Management -->
                            <div class="settings-card">
                                <h3><i class="fas fa-database"></i> Data Management</h3>
                                <div class="form-group">
                                    <button class="btn btn-secondary" id="exportDataBtn">
                                        <i class="fas fa-download"></i> Export My Data
                                    </button>
                                    <p style="font-size: 0.9rem; color: var(--gray); margin-top: 0.5rem;">
                                        Download all your snippets as a JSON file
                                    </p>
                                </div>
                            </div>

                            <!-- Danger Zone -->
                            <div class="settings-card danger-zone">
                                <h3><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
                                <div class="form-group">
                                    <button class="btn btn-danger" id="deleteAccountBtn">
                                        <i class="fas fa-trash"></i> Delete Account
                                    </button>
                                    <p style="font-size: 0.9rem; color: var(--error); margin-top: 0.5rem;">
                                        Permanently delete your account and all your data. This action cannot be undone.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Help & Support Section -->
                    <section id="helpSection" class="snippets-section" style="display:none;">
                        <div class="section-header">
                            <h2 class="section-title">Help & Support</h2>
                        </div>

                        <div class="help-container">
                            <!-- Quick Help Cards -->
                            <div class="help-grid">
                                <div class="help-card" onclick="showHelpContent('getting-started')">
                                    <div class="help-icon">
                                        <i class="fas fa-rocket"></i>
                                    </div>
                                    <h3>Getting Started</h3>
                                    <p>Learn how to use CodeVault effectively</p>
                                </div>

                                <div class="help-card" onclick="showHelpContent('snippets')">
                                    <div class="help-icon">
                                        <i class="fas fa-code"></i>
                                    </div>
                                    <h3>Managing Snippets</h3>
                                    <p>Create, edit, and organize your code snippets</p>
                                </div>

                                <div class="help-card" onclick="showHelpContent('filters')">
                                    <div class="help-icon">
                                        <i class="fas fa-filter"></i>
                                    </div>
                                    <h3>Search & Filters</h3>
                                    <p>Find your snippets quickly with advanced search</p>
                                </div>

                                <div class="help-card" onclick="showHelpContent('keyboard')">
                                    <div class="help-icon">
                                        <i class="fas fa-keyboard"></i>
                                    </div>
                                    <h3>Keyboard Shortcuts</h3>
                                    <p>Work faster with handy shortcuts</p>
                                </div>
                            </div>

                            <!-- FAQ Section -->
                            <div class="faq-section">
                                <h3><i class="fas fa-question-circle"></i> Frequently Asked Questions</h3>
                                <div class="faq-list">
                                    <div class="faq-item">
                                        <div class="faq-question" onclick="toggleFAQ(this)">
                                            <span>How do I create a new snippet?</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="faq-answer">
                                            Click the "Add New Snippet" button on the dashboard. Fill in the title, select a language, add a description, tags, and your code. Then click "Save Snippet".
                                        </div>
                                    </div>

                                    <div class="faq-item">
                                        <div class="faq-question" onclick="toggleFAQ(this)">
                                            <span>Can I organize my snippets with tags?</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="faq-answer">
                                            Yes! Add comma-separated tags when creating or editing a snippet. You can then filter your snippets by tags in the "My Snippets" section.
                                        </div>
                                    </div>

                                    <div class="faq-item">
                                        <div class="faq-question" onclick="toggleFAQ(this)">
                                            <span>How do I mark a snippet as favorite?</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="faq-answer">
                                            Click the star icon (â˜†) on any snippet card to mark it as favorite. The star will turn solid (â˜…) and the snippet will appear in your Favorites section.
                                        </div>
                                    </div>

                                    <div class="faq-item">
                                        <div class="faq-question" onclick="toggleFAQ(this)">
                                            <span>Can I export my data?</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="faq-answer">
                                            Yes! Go to Settings â†’ Data Management and click "Export My Data" to download all your snippets as a JSON file.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Support Contact -->
                            <div class="support-contact">
                                <h3><i class="fas fa-life-ring"></i> Still Need Help?</h3>
                                <div class="contact-options">
                                    <div class="contact-option">
                                        <i class="fas fa-envelope"></i>
                                        <div>
                                            <h4>Email Support</h4>
                                            <p>support@codevault.com</p>
                                            <small>We typically respond within 24 hours</small>
                                        </div>
                                    </div>
                                    <div class="contact-option">
                                        <i class="fas fa-book"></i>
                                        <div>
                                            <h4>Documentation</h4>
                                            <p>Full user guide and API documentation</p>
                                            <small>Visit our comprehensive docs</small>
                                        </div>
                                    </div>
                                    <div class="contact-option">
                                        <i class="fab fa-github"></i>
                                        <div>
                                            <h4>GitHub Issues</h4>
                                            <p>Report bugs and suggest features</p>
                                            <small>Contribute to the project</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
        </div>
    </section>

    <!-- Add Snippet Modal -->
    <div class="modal" id="addSnippetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Snippet</h2>
                <button class="close-modal" id="closeModalBtn">&times;</button>
            </div>

            <div class="form-group">
                <label>Title *</label>
                <input type="text" id="snippetTitle" placeholder="Enter snippet title">
            </div>

            <div class="form-group">
                <label>Language *</label>
                <select id="snippetLanguage">
                    <option value="">Select a language</option>
                    <option>JavaScript</option>
                    <option>Python</option>
                    <option>PHP</option>
                    <option>C</option>
                    <option>C++</option>
                    <option>Java</option>
                    <option>CSS</option>
                    <option>HTML</option>
                    <option>SQL</option>
                </select>
            </div>

            <div class="form-group">
                <label>Description *</label>
                <textarea id="snippetDescription" placeholder="Short description"></textarea>
            </div>

            <div class="form-group">
                <label>Tags (comma separated)</label>
                <input type="text" id="snippetTags" placeholder="example: api, fetch, async">
            </div>

            <div class="form-group">
                <label>Code *</label>
                <textarea id="snippetCode" placeholder="Write your code here..."></textarea>
            </div>

            <button class="btn btn-success" id="saveSnippetBtn">
                <i class="fas fa-save"></i> Save Snippet
            </button>
        </div>
    </div>

  <!-- VIEW SNIPPET MODAL -->
<div class="modal" id="viewSnippetModal">
    <div class="modal-content large-modal">
        <div class="modal-header">
            <h2 id="viewTitle">Snippet Title</h2>
            <button class="close-modal" onclick="closeViewModal()">&times;</button>
        </div>

        <div class="snippet-info-box">
            <span class="view-language" id="viewLanguage"></span>
            <p id="viewDescription"></p>
            <div id="viewTags"></div>
        </div>

        <!-- UPDATED CODE BOX -->
        <div class="code-box">
            <pre><code id="viewCode"></code></pre>
        </div>

        <div class="snippet-view-actions">
            <button class="btn" id="copyCodeBtn">
                <i class="fas fa-copy"></i> Copy
            </button>
            <button class="btn" id="editSnippetBtn"><i class="fas fa-edit"></i> Edit</button>
            <button class="btn btn-danger" id="deleteSnippetBtn"><i class="fas fa-trash"></i> Delete</button>
        </div>
    </div>
</div>
    <!-- Edit Snippet Modal -->
    <div class="modal" id="editSnippetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Snippet</h2>
                <button class="close-modal" onclick="closeEditModal()">&times;</button>
            </div>

            <input type="hidden" id="editSnippetId">

            <div class="form-group">
                <label>Title *</label>
                <input type="text" id="editTitle">
            </div>

            <div class="form-group">
                <label>Language *</label>
                <select id="editLanguage">
                    <option>JavaScript</option>
                    <option>Python</option>
                    <option>PHP</option>
                    <option>C</option>
                    <option>C++</option>
                    <option>Java</option>
                    <option>CSS</option>
                    <option>HTML</option>
                    <option>SQL</option>
                </select>
            </div>

            <div class="form-group">
                <label>Description *</label>
                <textarea id="editDescription"></textarea>
            </div>

            <div class="form-group">
                <label>Tags (comma separated)</label>
                <input type="text" id="editTags">
            </div>

            <div class="form-group">
                <label>Code *</label>
                <textarea id="editCode"></textarea>
            </div>

            <button class="btn btn-success" onclick="saveEditedSnippet()">
                <i class="fas fa-save"></i> Update Snippet
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="UserDashboard.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="UserDashboard.js"></script>

<!-- ADD THIS SCRIPT FOR SYNTAX HIGHLIGHTING INITIALIZATION -->
<script>
// Initialize syntax highlighting

</script>
</body>
</body>
</html>